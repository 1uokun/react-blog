<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>抽离除公共组件类Componet</title>
</head>
<body>
<div id="root"></div>
<!--<script>
    //原理
    class Component {
        //public
        setState(state){
            this.state=state;
        }
    }

    //继承setState
    class D extends Component {
        constructor(props){
            //super继承父类所有成员变量 -- java
            //如果子类中存在构造函数，则需要在使用“this”之前首先调用 super()。 --javascript
            super(props);
            this.state = {isLike:false}
        }

    }

    const d = new D();
    console.log(d.state)
    d.setState({isLike:true})
    console.log(d.state)
</script>-->
<script src="Component.js"></script>
<script>
    class D extends Component {
        constructor(props){
            super(props)
            this.state = {isLiked:false}
        }

        onClick () {
            this.setState({
                isLiked: !this.state.isLiked
            })
        }

        render(){
            return `
            <button class='like-btn'>
              <span class='like-text'>${this.state.isLiked ? '取消' : '点赞'}</span>
              <span>👍</span>
            </button>
    `}
    }

    //自组件调用父组件的_renderDOM方法
    const wrapper = document.getElementById("root")
    const d = new D();
    // wrapper.appendChild(d._renderDOM())
    // d.onStateChange = (oldEl, newEl)=>{
    //     console.log(oldEl, newEl)
    //     wrapper.insertBefore(newEl, oldEl)
    //     wrapper.removeChild(oldEl)
    // }
    //将52-57方法抽离出来做一个公共方法
    const mount = (wrapper,component)=>{
        wrapper.appendChild(component._renderDOM())
        component.onStateChange = (oldEl,newEl)=>{
            wrapper.insertBefore(newEl, oldEl)
            wrapper.removeChild(oldEl)
        }
    }
    mount(wrapper,d)
</script>
</body>
</html>